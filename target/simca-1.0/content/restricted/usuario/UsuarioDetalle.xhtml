<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/LoggedTemplate.xhtml">

    <ui:define name="pageTitleText">Datos del usuario</ui:define>

    <ui:define name="contentPart">
        <h:form prependId="false">
            <p:fieldset legend="Edición de datos personales">
                <h:panelGrid id="usuarioDetalleForm" columns="2">
                    <h:outputLabel for="firstName" value="Nombre"/>
                    <h:inputText id="firstName" value="#{usuarioDetalleMB.usuarioDetalle.nombre}" maxlength="#{commonDataMB.maxInputTextLength}"/>
                    <h:outputText value=""/>
                    <p:message for="firstName"/>

                    <h:outputLabel for="apellidoPaterno" value="Apellido paterno:"/>
                    <h:inputText id="apellidoPaterno" value="#{usuarioDetalleMB.usuarioDetalle.apPaterno}" maxlength="#{commonDataMB.maxInputTextLength}"/>
                    <h:outputText value=""/>
                    <p:message for="apellidoPaterno"/>

                    <h:outputLabel for="apellidoMaterno" value="Apellido materno:"/>
                    <h:inputText id="apellidoMaterno" value="#{usuarioDetalleMB.usuarioDetalle.apMaterno}" maxlength="#{commonDataMB.maxInputTextLength}"/>
                    <h:outputText value=""/>
                    <p:message for="apellidoMaterno"/>

                    <h:outputLabel for="phoneNumber" value="Telefonos:"/>
                    <h:inputText id="phoneNumber" value="#{usuarioDetalleMB.usuarioDetalle.telefonos}" maxlength="#{commonDataMB.maxInputTextLength}"/>
                    <h:outputText value=""/>
                    <p:message for="phoneNumber"/>

                    <h:outputLabel for="address" value="Dirección:"/>
                    <h:inputText id="address" value="#{usuarioDetalleMB.usuarioDetalle.direccion}" maxlength="#{commonDataMB.maxInputTextLength}"/>
                    <h:outputText value=""/>
                    <p:message for="address"/>

                    <h:outputLabel for="email" value="Correo:"/>
                    <h:inputText id="email" value="#{usuarioDetalleMB.usuario.correo}" maxlength="#{commonDataMB.maxInputTextLength}"/>
                    <h:outputText value=""/>
                    <p:message for="email"/>

                    <h:outputLabel for="secretQuestion" value="Pregunta secreta:"/>
                    <h:inputText id="secretQuestion" value="#{usuarioDetalleMB.usuario.preguntaSecreta}" maxlength="#{commonDataMB.maxInputTextLength}"/>
                    <h:outputText value=""/>
                    <p:message for="secretQuestion"/>

                    <h:outputLabel for="secretAnswer" value="Respuesta secreta:"/>
                    <h:inputText id="secretAnswer" value="#{usuarioDetalleMB.usuario.respuestaSecreta}" maxlength="#{commonDataMB.maxInputTextLength}"/>
                    <h:outputText value=""/>
                    <p:message for="secretAnswer"/>

                    <h:outputLabel for="mandaCorreoPromo" value="Correo promocional:"/>
                    <h:selectBooleanCheckbox id="mandaCorreoPromo" value="#{usuarioDetalleMB.usuarioDetalle.mandaCorreoPromo}" />
                    <h:outputText value=""/>
                    <p:message for="mandaCorreoPromo"/>

                </h:panelGrid>
                
                <p:commandButton
                    value="Guardar"
                    update="usuarioDetalleForm"
                    oncomplete="showAceptMessage(xhr, status, args);"
                    actionListener="#{usuarioDetalleMB.guarda}" />
            </p:fieldset>
        </h:form>

    </ui:define>

    <ui:define name="avisoExitoMsg">
        <h:outputText value="Su información ha sido modificada exitosamente"/>
    </ui:define>
    
    <ui:define name="avisoExitoDlg">
           <input type="button" value="Aceptar" onclick="location='#{request.contextPath}#{commonDataMB.defaultTargetUrl}';" />
    </ui:define>

    <ui:define name="outLayoutPart" >
        <ui:include src="/WEB-INF/components/Dialogs.xhtml" />
    </ui:define>
    
</ui:composition>