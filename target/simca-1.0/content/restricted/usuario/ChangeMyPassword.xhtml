<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    template="/WEB-INF/templates/LoggedTemplate.xhtml">

    <ui:define name="pageTitleText">Cambiar Clave</ui:define>
    
    <ui:define name="contentPart">
            <h:form id="chagePasswordForm" prependId="false">
                <p:fieldset legend="Cambiar clave">
                    <h:panelGrid columns="2">
                        <h:outputText value="Clave actual:"/>
                        <p:password id="claveActual" value="#{changeMyPasswordMB.claveActual}" feedback="false" maxlength="#{commonDataMB.maxInputTextLength}" />
                        <h:outputText value=""/>
                        <p:message for="claveActual"/>

                        <h:outputText value="Nueva clave:"/>
                        <p:password id="nuevaClave" value="#{changeMyPasswordMB.nuevaClave}" feedback="false" maxlength="#{commonDataMB.maxInputTextLength}" />
                        <h:outputText value=""/>
                        <p:message for="nuevaClave"/>

                        <h:outputText value="Confirma clave:"/>
                        <p:password id="confirmaClave" value="#{changeMyPasswordMB.confirmaClave}" feedback="false" maxlength="#{commonDataMB.maxInputTextLength}" />
                        <h:outputText value=""/>
                        <p:message for="confirmaClave"/>

                    </h:panelGrid>

                    <p:commandButton
                        value="Cambiar clave de acceso"
                        update="msg, chagePasswordForm"
                        oncomplete="showAceptMessage(xhr, status, args);"
                        actionListener="#{changeMyPasswordMB.cambiaClave}" />

                    <div style="text-align: left;">
                        <p:messages id="msg" showDetail="true" showSummary="false" />
                    </div>
                </p:fieldset>
            </h:form>
    </ui:define>

    <ui:define name="avisoExitoMsg">
        <h:outputText value="Su clave ha sido cambiada exitosamente"/>
    </ui:define>

    <ui:define name="avisoExitoDlg">
           <input type="button" value="Aceptar" onclick="location='#{request.contextPath}#{commonDataMB.defaultTargetUrl}';" />
    </ui:define>

    <ui:define name="outLayoutPart" >
        <ui:include src="/WEB-INF/components/Dialogs.xhtml" />
    </ui:define>

</ui:composition>
